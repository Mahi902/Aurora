<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            padding: 0;
            margin: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .notes-container {
            display: flex;
            height: 100%;
            padding: 20px;
            gap: 20px;
        }

        .note-list-container {
            width: 250px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .note-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .note-list-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
        }

        #newNoteBtn {
            background-color: #007aff;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        #newNoteBtn:hover {
            background-color: #005bb5;
        }

        #noteList {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            list-style: none;
        }
        
        #noteList li {
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 5px;
            transition: background-color 0.2s ease;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #noteList li:hover {
            background-color: #f0f0f0;
        }
        #noteList li.active {
            background-color: #e0e0e0;
            font-weight: 500;
        }

        .main-editor-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            display: flex;
            gap: 10px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            justify-content: flex-start;
        }

        .toolbar button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            border-radius: 6px;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        .toolbar button:hover {
            background-color: #f0f0f0;
        }
        .toolbar button:active {
            transform: scale(0.95);
        }

        .notes-area {
            flex-grow: 1;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
            overflow-y: auto;
            white-space: pre-wrap;
            min-height: 200px; /* Ensures a minimum size even if content is small */
        }
        
        .notes-area:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.3);
        }

        #titleInput {
            width: 100%;
            padding: 10px;
            font-size: 1.5rem;
            font-weight: 600;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        #titleInput:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .notes-container {
                padding: 10px;
                flex-direction: column;
                gap: 10px;
            }
            .note-list-container {
                width: 100%;
                flex-shrink: 0;
            }
            .toolbar {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="notes-container">
        <!-- Note List Sidebar -->
        <div class="note-list-container">
            <div class="note-list-header">
                <h3>My Notes</h3>
                <button id="newNoteBtn" title="New Note"><i class="fa-solid fa-plus"></i></button>
            </div>
            <ul id="noteList"></ul>
        </div>

        <!-- Main Editor -->
        <div class="main-editor-container">
            <div class="toolbar">
                <button id="boldBtn" title="Bold"><i class="fa-solid fa-bold"></i></button>
                <button id="underlineBtn" title="Underline"><i class="fa-solid fa-underline"></i></button>
                <button id="sizeUpBtn" title="Increase Font Size"><i class="fa-solid fa-plus"></i></button>
                <button id="sizeDownBtn" title="Decrease Font Size"><i class="fa-solid fa-minus"></i></button>
                <button id="deleteNoteBtn" title="Delete Note"><i class="fa-solid fa-trash-can"></i></button>
            </div>
            <input type="text" id="titleInput" placeholder="Note Title">
            <div id="notes-content" class="notes-area" contenteditable="true" data-font-size="16"></div>
        </div>
    </div>
    
    <script>
        const noteList = document.getElementById('noteList');
        const notesContent = document.getElementById('notes-content');
        const titleInput = document.getElementById('titleInput');
        const newNoteBtn = document.getElementById('newNoteBtn');
        const deleteNoteBtn = document.getElementById('deleteNoteBtn');
        const boldBtn = document.getElementById('boldBtn');
        const underlineBtn = document.getElementById('underlineBtn');
        const sizeUpBtn = document.getElementById('sizeUpBtn');
        const sizeDownBtn = document.getElementById('sizeDownBtn');

        let notes = [];
        let activeNoteId = null;
        let debounceTimeout;

        function saveNotes() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }

        function loadNotes() {
            const storedNotes = localStorage.getItem('notes');
            notes = storedNotes ? JSON.parse(storedNotes) : [];
            renderNoteList();

            if (notes.length > 0) {
                setActiveNote(notes[0].id);
            } else {
                notesContent.innerHTML = '';
                titleInput.value = '';
                activeNoteId = null;
            }
        }

        function renderNoteList() {
            noteList.innerHTML = '';
            notes.forEach(note => {
                const li = document.createElement('li');
                li.textContent = note.title || 'Untitled';
                li.dataset.id = note.id;
                li.classList.toggle('active', note.id === activeNoteId);
                li.addEventListener('click', () => setActiveNote(note.id));
                noteList.appendChild(li);
            });
        }

        function setActiveNote(id) {
            const note = notes.find(n => n.id === id);
            if (!note) return;

            activeNoteId = id;
            titleInput.value = note.title;
            notesContent.innerHTML = note.content;
            notesContent.focus();
            
            // Update active class in list
            document.querySelectorAll('#noteList li').forEach(li => {
                li.classList.toggle('active', li.dataset.id === id);
            });
        }

        function createNewNote() {
            const newNote = {
                id: Date.now().toString(),
                title: 'New Note',
                content: ''
            };
            notes.unshift(newNote); // Add to the beginning of the array
            saveNotes();
            renderNoteList();
            setActiveNote(newNote.id);
        }

        function deleteNote() {
            if (!activeNoteId) return;

            notes = notes.filter(note => note.id !== activeNoteId);
            saveNotes();
            renderNoteList();

            if (notes.length > 0) {
                setActiveNote(notes[0].id);
            } else {
                notesContent.innerHTML = '';
                titleInput.value = '';
                activeNoteId = null;
            }
        }

        function updateActiveNote() {
            if (!activeNoteId) return;
            const noteIndex = notes.findIndex(n => n.id === activeNoteId);
            if (noteIndex !== -1) {
                notes[noteIndex].title = titleInput.value;
                notes[noteIndex].content = notesContent.innerHTML;
                saveNotes();
                renderNoteList(); // Re-render to update the title in the list
            }
        }

        // Debounce function to limit saves
        function debounce(func, delay) {
            return function(...args) {
                clearTimeout(debounceTimeout);
                debounceTimeout = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // UI Event Listeners
        function formatText(command, value = null) {
            document.execCommand(command, false, value);
        }

        boldBtn.addEventListener('click', () => formatText('bold'));
        underlineBtn.addEventListener('click', () => formatText('underline'));

        sizeUpBtn.addEventListener('click', () => {
            const currentSize = parseInt(notesContent.dataset.fontSize);
            notesContent.dataset.fontSize = `${currentSize + 2}`;
            notesContent.style.fontSize = `${currentSize + 2}px`;
        });

        sizeDownBtn.addEventListener('click', () => {
            const currentSize = parseInt(notesContent.dataset.fontSize);
            notesContent.dataset.fontSize = `${Math.max(12, currentSize - 2)}`;
            notesContent.style.fontSize = `${Math.max(12, currentSize - 2)}px`;
        });

        notesContent.addEventListener('input', debounce(updateActiveNote, 500));
        titleInput.addEventListener('input', debounce(updateActiveNote, 500));

        newNoteBtn.addEventListener('click', createNewNote);
        deleteNoteBtn.addEventListener('click', deleteNote);

        // Initial setup
        loadNotes();
        if (notes.length === 0) {
            createNewNote(); // Create a default note if none exist
        }
    </script>
</body>
</html>
