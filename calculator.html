<!DOCTYPE html>
<html>
<head>
	<title>Calculator</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.6.4/math.js"
		integrity="sha512-BbVEDjbqdN3Eow8+empLMrJlxXRj5nEitiCAK5A1pUr66+jLVejo3PmjIaucRnjlB0P9R3rBUs3g5jXc8ti+fQ=="
		crossorigin="anonymous" referrerpolicy="no-referrer">
	</script>
	<style>
		/* Minimalist White Theme Styles - Optimized for PC Landscape */
		body {
			/* Full white background, centered content */
			background-color: white; 
			color: #3C4043;
			font-family: 'Google Sans', Arial, sans-serif;
			margin: 0;
			padding: 0;
			min-height: 100vh;
			display: flex;
			align-items: center; /* Center horizontally */
			justify-content: center; /* Center vertically */
		}

		form {
		    /* Ensure the form doesn't interfere with body centering */
		    display: contents; 
		}

		table {
			border: none;
			background-color: white;
			border-radius: 10px;
			padding: 10px;
			width: 600px; /* Base width for landscape */
			max-width: 90%; 
			/* Use border-spacing to create consistent gaps between buttons */
			border-spacing: 5px; 
			border-collapse: separate;
		}

		/* Button Cell (td) Styling to control button placement */
		table td {
		    padding: 0; /* Remove default padding */
		    width: 16.66%; /* 100% / 6 columns */
		    max-width: 90px;
		}
		
		/* Display Cell */
		table tr:first-child td {
		    width: 100%;
		    padding: 5px 0 10px 0;
		}

		input[type="button"] {
			/* Sizing for perfect circles within the cell */
			width: 55px;
			height: 55px;
			padding: 0;
			font-size: 18px;
			font-weight: 500;
			border: none;
			border-radius: 50%; /* Ensure button is circular */
			margin: 0 auto; /* Center button within the cell */
			display: block; /* Allows margin: 0 auto to work */
			cursor: pointer;
			transition: background-color 0.15s;
			text-align: center;
			line-height: 55px; /* Vertically center text if height is 55px */
		}
		
		input[type="button"]:focus {
		    outline: none;
		}

		input[type="button"]:hover {
			background-color: #F8F9FA;
		}

		input[type="button"]:active {
			background-color: #E8EAED;
		}

		/* Button Styles */
		input[type="button"].number {
			background-color: #F1F3F4; /* Light gray background for numbers/main operators */
			color: #202124;
		}
		
		input[type="button"].secondary-operator {
			background-color: white;
			color: #1A73E8; /* Google's primary blue for functions */
			font-weight: normal;
		}

		input[type="button"].operator {
			background-color: #F1F3F4;
			color: #1A73E8;
			font-weight: 500;
		}

		input[type="button"].special-operator {
			background-color: #F1F3F4;
			color: #EA4335; /* Red for clear/delete */
			font-weight: 500;
		}
		
		input[type="button"][value="="] {
		    background-color: #1A73E8;
		    color: white;
		}
		
		input[type="button"][value="="]:hover {
		    background-color: #1765c0;
		}


		/* Display Style */
		input[type="text"] {
			width: 100%; 
			padding: 15px 10px;
			font-size: 30px;
			font-weight: 400;
			border: none;
			border-radius: 5px;
			background-color: white;
			color: #202124;
			text-align: right;
			margin-bottom: 10px;
			box-shadow: 0 1px 6px 0 rgba(32, 33, 36, 0.08); /* Re-added subtle shadow for display only */
		}

		/* Remove the unnecessary overlay styles */
        #answerOverlay {
            display: none;
        }

	</style>
</head>
<body>
	<form>
		<table>
			<tr>
				<td colspan="6">
					<input id="display" type="text" readonly>
				</td>
			</tr>
			<tr>
				<td><input type="button" value="1" class="number" onclick="appendToDisplay('1')"></td>
				<td><input type="button" value="2" class="number" onclick="appendToDisplay('2')"></td>
				<td><input type="button" value="3" class="number" onclick="appendToDisplay('3')"></td>
				<td><input type="button" value="C" class="special-operator" onclick="clearDisplay()"></td>
				<td><input type="button" value="⌫" class="special-operator" onclick="backspace()"></td>
				<td><input type="button" value="=" class="number" onclick="calculateAndShow()"></td>
			</tr>
			<tr>
				<td><input type="button" value="4" class="number" onclick="appendToDisplay('4')"></td>
				<td><input type="button" value="5" class="number" onclick="appendToDisplay('5')"></td>
				<td><input type="button" value="6" class="number" onclick="appendToDisplay('6')"></td>
				<td><input type="button" value="-" class="operator" onclick="appendToDisplay('-')"></td>
				<td><input type="button" value="%" class="operator" onclick="appendToDisplay('%')"></td>
				<td><input type="button" value="cos" class="secondary-operator" onclick="appendToDisplay('cos(')"></td>
			</tr>
			<tr>
				<td><input type="button" value="7" class="number" onclick="appendToDisplay('7')"></td>
				<td><input type="button" value="8" class="number" onclick="appendToDisplay('8')"></td>
				<td><input type="button" value="9" class="number" onclick="appendToDisplay('9')"></td>
				<td><input type="button" value="×" class="operator" onclick="appendToDisplay('*')"></td>
				<td><input type="button" value="!" class="operator" onclick="appendToDisplay('!')"></td>
				<td><input type="button" value="sin" class="secondary-operator" onclick="appendToDisplay('sin(')"></td>
			</tr>
			<tr>
				<td><input type="button" value="." class="number" onclick="appendToDisplay('.')"></td>
				<td><input type="button" value="0" class="number" onclick="appendToDisplay('0')"></td>
				<td><input type="button" value="," class="secondary-operator" onclick="appendToDisplay(',')"></td>
				<td><input type="button" value="+" class="operator" onclick="appendToDisplay('+')"></td>
				<td><input type="button" value="÷" class="operator" onclick="appendToDisplay('/')"></td>
				<td><input type="button" value="tan" class="secondary-operator" onclick="appendToDisplay('tan(')"></td>
			</tr>
			<tr>
				<td><input type="button" value="E" class="secondary-operator" onclick="e()"></td>
				<td><input type="button" value="pi" class="secondary-operator" onclick="pi()"></td>
				<td><input type="button" value="^" class="secondary-operator" onclick="power()"></td>
				<td><input type="button" value="(" class="secondary-operator" onclick="appendToDisplay('(')"></td>
				<td><input type="button" value=")" class="secondary-operator" onclick="appendToDisplay(')')"></td>
				<td><input type="button" value="log" class="secondary-operator" onclick="base10Log()"></td>
			</tr>
			<tr>
				<td><input type="button" value="sqrt" class="secondary-operator" onclick="squareRoot()"></td>
				<td><input type="button" value="ln2" class="secondary-operator" onclick="appendToDisplay(Math.LN2)"></td>
				<td><input type="button" value="log10" class="secondary-operator" onclick="base10Log()"></td>
				<td><input type="button" value="l2e" class="secondary-operator" onclick="appendToDisplay(Math.LOG2E)"></td>
				<td><input type="button" value="l10e" class="secondary-operator" onclick="appendToDisplay(Math.LOG10E)"></td>
				<td><input type="button" value="exp" class="secondary-operator" onclick="appendToDisplay('exp(')"></td>
			</tr>
		</table>
	</form>

	<script>
		const display = document.getElementById("display");
		// Removed answerOverlay and timeout variables

		function appendToDisplay(value) {
		    if (display.value === "Error" || display.value === "Infinity") {
		        display.value = "";
		    }
			display.value += value;
		}
		
		function clearDisplay() {
		    display.value = "";
		}

		function backspace() {
			display.value = display.value.slice(0, -1);
		}

		function calculate() {
			let expression = display.value;
			let result;

			try {
				result = math.evaluate(expression);

				if (typeof result === 'number' && !Number.isInteger(result) && result.toString().length > 15) {
				    result = result.toFixed(10);
				}
				
				if (typeof result !== 'number' && typeof result !== 'string') {
				    result = result.toString();
				}

				return result;

			} catch (error) {
				console.error("Calculation error:", error);
				return "Error";
			}
		}
        
        // REMOVED: The showAnswer function is deleted as requested
        
		function calculateAndShow() {
		    const result = calculate();
		    // Now the result is just written directly to the display
		    display.value = result;
		}

		function squareRoot() {
			appendToDisplay("sqrt(");
		}

		function base10Log() {
			appendToDisplay("log10(");
		}

		function pi() {
			appendToDisplay("pi");
		}

		function e() {
			appendToDisplay("e");
		}

		function power() {
			appendToDisplay("^");
		}
	
        // Keyboard Listener
        document.addEventListener("DOMContentLoaded", function () {
            
            document.addEventListener("keydown", function (event) {
                // Removed all code related to answerOverlay cleanup

                if (event.key.match(/[0-9.+\-*/()%^]/)) {
                    event.preventDefault();
                    appendToDisplay(event.key);
                } else if (event.key === "Enter") {
                    event.preventDefault();
                    calculateAndShow();
                } else if (event.key === "Backspace") {
                    event.preventDefault();
                    backspace();
                } else if (event.key === "Escape") {
                    event.preventDefault();
                    clearDisplay();
                }
            });
        });
	</script>
</body>
</html>
